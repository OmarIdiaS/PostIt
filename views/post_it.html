{% extends "base.html" %}

{% block title %}Post_it{% endblock %}

{% block head %} 

    <link rel="stylesheet" href="public/style.css"> 
    

{% endblock %}

{% block main %}


<body id="post_it"> 
<table>
  <tr>
  <td>Welcome {{current}}</td>
    <form action="/admindelete" method="post">
    <a href="/" class="submit"><input type="image" src="https://cdn.glitch.com/e7146dd9-331b-4c07-9d68-fd24547f0732%2Fsuppr-ConvertImage.png?1554507094885" value="DELETE"></a>
    </form>
    </tr>
  
</table>
  
<table>
  
{% for d in donn %}
 
  <tr>
    <td>{{ d.login }}</td>
     
    <td>{{d.txt}}<textarea name="txtt"  style="display:none;">{{d.txt}}</textarea></td>
    <td>{{d.coor}}</td>
    <form action="/suppr" method="post">
    <td><textarea name="img"  style="display:none;">{{d.id}}</textarea></td>
    <td>{{d.useer}}</td>
    <td><a href = "/" class="submit" ><input type="image" src="https://cdn.glitch.com/e7146dd9-331b-4c07-9d68-fd24547f0732%2Fsuppr-ConvertImage.png?1554507094885" value="Delete"></a></td>
  </form>
      </tr>
   
{% endfor %}
   
</table>
  
  <script>
  
 document.getElementById("post_it").ondblclick = function() {myfunction()};
 
 
 function s(){alert("oui");}
    

    

    
 function myfunction() {
   
   // Coordonnees
    var x = event.clientX ; 
	  var y = event.clientY; 
	  var coor = "X :" + x + " Y :"  + y ;
  
   // Date
   var d = new Date(); 
	
	var j = d.getDate(); 
	var mois = d.getMonth() + 1; 
	var annee = d.getFullYear(); 
	var h = d.getHours(); 
	var m = d.getMinutes();
   var date = j+"/"+mois+"/"+annee+"  "+h+":"+m ; 
   
   //TEXTE
   
   var texte = prompt("Saisir votre texte ::");
   
    var xhr = new XMLHttpRequest();
    var url = "/p";
    xhr.open("POST", url, true); 

   
    xhr.onreadystatechange = function () {
      if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
        var json = JSON.stringify(xhr.responseText);
        alert("les donnees sont envoyer a la BD");
        window.location = document.url;
      window.location.reload();
      }
    };
  
  var data = { login: texte, txt : date, coor : coor};
  xhr.setRequestHeader("Content-Type", "application/json");
  xhr.send(JSON.stringify(data));
  console.log('okk');
   
 }
    
    
    
  
  var width=100;
 var difference=2;
 var interveralID =0;
 //document.getElementById("img1").style.width=width;
 
 function increase()
 {
 clearInterval(interveralID);
 interveralID=setInterval(expand,10);
 }
 function decrease()
 {
 clearInterval(interveralID);
 interveralID=setInterval(shrink,10);
 }
 function expand()
 {
 if(width<200)
 {
 width = width+difference;
 document.getElementById("imgg").style.width=width;
 console.log(width);
 }
 else
 {
 clearInterval(interveralID);
 }
 
 }
 function shrink()
 {
 if(width>100)
 {
 width = width-difference;
 document.getElementById("imgg").style.width=width;
 console.log(width);
 }
 else
 {
 clearInterval(interveralID);
 }
 
 }
  
</script>
  
 <!-- <div>
    {% for d in donn %}
    <p> {{ d.login }}</p>
    <p> {{ d.txt }}</p>
    <p> {{ d.coor }}</p>
    {% endfor %}
  </div>-->
  
  
  <div class="message">
  {{ message }}
  </div>
</body>
{% endblock %}